<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
    <head>
        <title>Результаты поиска отелей</title>
        <link rel="stylesheet" href="/css/styles.css">
        <script src="/js/search_form.js"></script>

    </head>
    <body>
        <header th:insert="~{blocks/header :: header}"></header>

        <div class="container">
            <!-- Форма для поиска отелей -->
            <div class="search-form">
                <form th:action="@{/search}" method="post" th:object="${hotelSearchForm}">
                    <div>
                        <!-- Добавить ввод города самому и поиск городов пока вводишь ? -->
        <!--                <label for="city">Город:</label>-->
        <!--                <input type="text" id="city" name="city" th:value="*{city}" placeholder="Введите город" required>-->
        <!--                -->

                        <label for="city">Город:</label>
                        <select id="city" name="city" required>
                            <option th:each="city : ${cities}"
                                    th:value="${city}"
                                    th:text="${city}"
                                    th:selected="${city == hotelSearchForm.city}">
                            </option>
                        </select>

                    </div>
                    <div>
                        <label for="checkInDate">Дата заезда:</label>
                        <input type="date" id="checkInDate" name="checkInDate" th:value="*{checkInDate}"
                               th:min="${todayDate}" onchange="updateMinCheckOutDate()" required>
                    </div>
                    <div>
                        <label for="checkOutDate">Дата выезда:</label>
                        <input type="date" id="checkOutDate" name="checkOutDate" th:value="*{checkOutDate}"
                               th:min="${todayDate}" onchange="updateMaxCheckInDate()" required>
                    </div>
                    <div>
                        <label for="adults">Количество взрослых:</label>
                        <input type="number" id="adults" name="adults" th:value="*{adults}" min="1" required>
                    </div>
                    <div>
                        <button type="submit">Искать</button>
                    </div>
                </form>
            </div>

            <!-- Результаты поиска -->
            <div class="search-results">
                <h2>Найденные отели:</h2>
                <div th:if="${#lists.isEmpty(hotels)}">
                    <p>Отели по заданным параметрам не найдены. Попробуйте изменить поиск.</p>
                </div>
                <div th:if="${!#lists.isEmpty(hotels)}">
                    <ul>
                        <li th:each="hotel : ${hotels}">
                            <div class="hotel-item">
                                <h3 th:text="${hotel.name}">Название отеля</h3>
                                <p th:text="'Адрес: ' + ${hotel.address}">Адрес отеля</p>
                                <p th:text="'Город: ' + ${hotel.city}">Город</p>
                                <p th:text="'Рейтинг: ' + ${hotel.rating} + ' ★'">Рейтинг</p>
<!--                                <a th:href="@{/hotel/{id}(id=${hotel.id})}">Подробнее</a>-->
                                <a th:href="@{/hotel/{id}
                                (id=${hotel.id},
                                checkInDate=${hotelSearchForm.checkInDate},
                                checkOutDate=${hotelSearchForm.checkOutDate},
                                adults=${hotelSearchForm.adults})
                                }">
                                    Подробнее
                                </a>
                            </div>
                        </li>
                    </ul>
                </div>
            </div>
        </div>

        <footer th:insert="~{blocks/footer :: footer}"></footer>

    </body>
</html>
